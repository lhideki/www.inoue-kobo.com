# 実装計画

- [x] 1. プロジェクトのセットアップと基本構造の作成
  - Next.jsプロジェクトを作成し、TypeScriptを設定する
  - 必要なライブラリとツールをインストールする
  - プロジェクトのディレクトリ構造を設定する
  - _要件: 5.1, 6.1_

- [x] 2. データモデルの実装
  - [x] 2.1 カードデータモデルの作成
    - サービスカードとサポートカードのインターフェースを定義する
    - カードデータのバリデーション関数を実装する
    - カードデータの型定義をテストする
    - _要件: 2.3_

  - [x] 2.2 課題データモデルの作成
    - 課題インターフェースを定義する
    - 課題データのバリデーション関数を実装する
    - 課題データの型定義をテストする
    - _要件: 3.2_

  - [x] 2.3 ゲーム状態データモデルの作成
    - ゲーム状態インターフェースを定義する
    - ゲーム状態の更新関数を実装する
    - ゲーム状態の型定義をテストする
    - _要件: 1.1, 1.2, 1.3, 1.4_

- [x] 3. カードデータの作成
  - [x] 3.1 サービスカードデータの作成
    - 70種類のAWSサービスカードのデータを作成する
    - 各カードにコスト、効果、説明、キーワードを設定する
    - サービスカードのカテゴリを定義する
    - _要件: 2.1, 2.3_

  - [x] 3.2 サポートカードデータの作成
    - 30種類のサポートカードのデータを作成する
    - 各カードにコスト、効果、説明、キーワードを設定する
    - 特別な組み合わせ効果を定義する
    - _要件: 2.2, 2.3, 2.6_

- [x] 4. 課題データの作成
  - 40種類のアーキテクチャ課題のデータを作成する
  - 各課題に説明、予算、キーワードを設定する
  - 課題の難易度レベルを設定する
  - _要件: 3.1, 3.2_

- [x] 5. ゲームエンジンの実装
  - [x] 5.1 ゲーム初期化ロジックの実装
    - ゲーム状態の初期化関数を実装する
    - ランダムな課題選択ロジックを実装する
    - 初期カード配布ロジックを実装する
    - ゲーム初期化ロジックのユニットテストを作成する
    - _要件: 1.1, 1.2, 1.3, 1.4_

  - [x] 5.2 ターン管理ロジックの実装
    - ターン進行ロジックを実装する
    - ターンスキップ機能を実装する
    - ターン終了条件を実装する
    - ターン管理ロジックのユニットテストを作成する
    - _要件: 1.9, 1.10_

  - [x] 5.3 カード管理ロジックの実装
    - カード選択ロジックを実装する
    - カード提出ロジックを実装する
    - カード捨て札ロジックを実装する
    - 新しいカードを引くロジックを実装する
    - カード管理ロジックのユニットテストを作成する
    - _要件: 1.5, 1.6, 1.7_

  - [x] 5.4 サポートカード有効化ロジックの実装
    - サポートカード有効化ロジックを実装する
    - サポートカード効果適用ロジックを実装する
    - 特別な組み合わせ効果ロジックを実装する
    - サポートカードロジックのユニットテストを作成する
    - _要件: 1.8, 2.5, 2.6_

- [x] 6. Amazon Bedrock統合の実装
  - [x] 6.1 Bedrockクライアントの設定
    - AWS SDKをセットアップする
    - Bedrockクライアントを設定する
    - 認証と認可を設定する
    - _要件: 4.1, 6.3_

  - [x] 6.2 評価プロンプトの作成
    - 課題評価用のプロンプトテンプレートを作成する
    - プロンプトパラメータの設定関数を実装する
    - プロンプトのテストと最適化を行う
    - _要件: 4.2, 4.3, 4.4_

  - [x] 6.3 評価結果の解析と適用
    - Bedrock応答の解析関数を実装する
    - 評価結果をゲーム状態に適用する関数を実装する
    - フィードバック生成関数を実装する
    - 評価結果解析のユニットテストを作成する
    - _要件: 4.5, 3.3, 3.5_

- [x] 7. フロントエンドコンポーネントの実装
  - [x] 7.1 カードコンポーネントの実装
    - サービスカードコンポーネントを実装する
    - サポートカードコンポーネントを実装する
    - カード選択状態の視覚的フィードバックを実装する
    - カードコンポーネントのユニットテストを作成する
    - _要件: 2.3, 5.5, 5.6_

  - [x] 7.2 手札コンポーネントの実装
    - 手札表示コンポーネントを実装する
    - カード選択ロジックをUIに統合する
    - 手札コンポーネントのユニットテストを作成する
    - _要件: 5.3_

  - [x] 7.3 サポートカードコンポーネントの実装
    - サポートカード表示コンポーネントを実装する
    - サポートカード有効化ロジックをUIに統合する
    - サポートカードコンポーネントのユニットテストを作成する
    - _要件: 5.4_

  - [x] 7.4 課題コンポーネントの実装
    - 課題表示コンポーネントを実装する
    - 予算と残りターン表示を実装する
    - 課題コンポーネントのユニットテストを作成する
    - _要件: 5.2_

  - [x] 7.5 アクションパネルコンポーネントの実装
    - カード提出ボタンを実装する
    - カード捨て札ボタンを実装する
    - ターンスキップボタンを実装する
    - アクションパネルコンポーネントのユニットテストを作成する
    - _要件: 1.5, 1.7, 1.9_

  - [x] 7.6 フィードバックパネルコンポーネントの実装
    - フィードバック表示コンポーネントを実装する
    - 評価結果の視覚的表現を実装する
    - フィードバックパネルコンポーネントのユニットテストを作成する
    - _要件: 5.7, 3.5_

  - [x] 7.7 ゲームボードコンポーネントの実装
    - 全体レイアウトを実装する
    - コンポーネント間の相互作用を実装する
    - レスポンシブデザインを実装する
    - ゲームボードコンポーネントの統合テストを作成する
    - _要件: 5.1, 5.2, 5.3, 5.4_

- [x] 8. API実装
  - [x] 8.1 ゲーム初期化APIの実装
    - ゲーム初期化エンドポイントを作成する
    - 課題選択ロジックをAPIに統合する
    - カード配布ロジックをAPIに統合する
    - ゲーム初期化APIのテストを作成する
    - _要件: 1.1, 1.2, 1.3, 1.4_

  - [x] 8.2 ソリューション評価APIの実装
    - ソリューション提出エンドポイントを作成する
    - Bedrock評価ロジックをAPIに統合する
    - 評価結果をクライアントに返す機能を実装する
    - ソリューション評価APIのテストを作成する
    - _要件: 1.6, 4.1, 4.2, 4.3, 4.4, 4.5_

  - [x] 8.3 ターン管理APIの実装
    - ターン進行エンドポイントを作成する
    - カード捨て札と新しいカードを引くロジックをAPIに統合する
    - ターンスキップロジックをAPIに統合する
    - ターン管理APIのテストを作成する
    - _要件: 1.7, 1.9, 1.10_

- [x] 9. 状態管理の実装
  - [x] 9.1 クライアント側状態管理の実装
    - Reactコンテキストまたはステート管理ライブラリを設定する
    - ゲーム状態の更新ロジックを実装する
    - 状態変更に基づくUIの更新を実装する
    - 状態管理のテストを作成する
    - _要件: 5.1, 5.2, 5.3, 5.4_

  - [x] 9.2 サーバー側状態管理の実装
    - セッション管理を実装する
    - ゲーム状態の永続化を実装する
    - エラー回復メカニズムを実装する
    - サーバー側状態管理のテストを作成する
    - _要件: 6.5_

- [x] 10. エラー処理とロギングの実装
  - クライアント側エラー処理を実装する
  - サーバー側エラー処理を実装する
  - エラーロギングを実装する
  - エラー通知UIを実装する
  - _要件: 5.1, 6.5_

- [x] 11. パフォーマンス最適化
  - 画像最適化を実装する
  - コード分割を実装する
  - サーバーサイドレンダリングを最適化する
  - キャッシング戦略を実装する
  - _要件: 5.1, 6.5_

- [x] 12. テストの実装
  - [x] 12.1 ユニットテストの実装
    - コンポーネントのユニットテストを実装する
    - ゲームロジックのユニットテストを実装する
    - APIエンドポイントのユニットテストを実装する
    - _要件: 5.1, 6.5_

  - [x] 12.2 統合テストの実装
    - フロントエンドとバックエンドの統合テストを実装する
    - Bedrock統合のテストを実装する
    - _要件: 4.1, 6.3, 6.5_

  - [x] 12.3 エンドツーエンドテストの実装
    - ゲームフローのエンドツーエンドテストを実装する
    - デプロイメントテストを実装する
    - _要件: 6.1, 6.4, 6.5_

- [x] 13. AWS CDKによるインフラストラクチャの実装
  - [x] 13.1 App Runner設定の実装
    - App Runner用のCDKコンストラクトを作成する
    - デプロイメントパイプラインを設定する
    - スケーリング設定を実装する
    - _要件: 6.1, 6.5_

  - [x] 13.2 Bedrock統合のインフラストラクチャ設定
    - Bedrock用のIAMロールとポリシーを設定する
    - セキュリティ設定を実装する
    - _要件: 4.1, 6.3_

  - [x] 13.3 モニタリングとアラートの設定
    - CloudWatchメトリクスとアラームを設定する
    - ログ記録を設定する
    - _要件: 6.5_

- [x] 14. デプロイメントとCI/CDの設定
  - GitHub Actionsワークフローを設定する
  - テスト自動化を設定する
  - デプロイメント自動化を設定する
  - _要件: 6.1, 6.5_

- [x] 15. ドキュメンテーションの作成
  - READMEを作成する
  - 開発者ドキュメントを作成する
  - デプロイメントガイドを作成する
  - _要件: 6.1, 6.4_

- [x] 16. データの整合性確認
  - [x] 16.1 カードデータの整合性確認
    - サービスカードデータの整合性を検証する
    - サポートカードデータの整合性を検証する
    - カード間の関連性と依存関係を確認する
    - _要件: 2.1, 2.2, 2.3, 2.6_

  - [x] 16.2 課題データの整合性確認
    - 課題データの整合性を検証する
    - 課題の難易度バランスを確認する
    - 課題とカードの関連性を検証する
    - _要件: 3.1, 3.2_

  - [x] 16.3 ゲーム状態の整合性確認
    - ゲーム状態の遷移を検証する
    - エッジケースでの状態管理を確認する
    - データの永続化と復元を検証する
    - _要件: 1.1, 1.2, 1.3, 1.4, 6.5_